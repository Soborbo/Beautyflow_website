---
import { type Locale, defaultLang, getLocalizedPath, routeMappings } from '../i18n';
import { Picture } from 'astro:assets';
import Logo from './Logo.astro';
import footerBg from '../assets/images/beautyflow-hatter.jpg';

interface Props {
  lang?: Locale;
}

const { lang = defaultLang } = Astro.props;

// Get localized paths for privacy and terms
const privacyMapping = routeMappings.find(m => m.hu === '/adatvedelmi-tajekoztato');
const termsMapping = routeMappings.find(m => m.hu === '/aszf');
const privacyPath = privacyMapping ? getLocalizedPath(privacyMapping[lang], lang) : '/adatvedelmi-tajekoztato';
const termsPath = termsMapping ? getLocalizedPath(termsMapping[lang], lang) : '/aszf';

const contactInfo = {
  phone: '+36 (1) 300 9414',
  email: 'hello@beautyflow.pro',
  owner: 'Kónya Fanni',
  taxNumber: '32724316-1-43',
  regNumber: '01-09-439280',
  address: '1116 Budapest, Fegyvernek utca 121.',
};

const labels = {
  hu: {
    phone: 'Telefonszám',
    owner: 'Ügyvezető',
    email: 'E-mail',
    taxNumber: 'Adószám',
    address: 'Székhely',
    regNumber: 'Cégjegyzékszám',
    copyright: 'Beautyflow Szépségszalon. Minden jog fenntartva.',
    privacy: 'Adatvédelmi tájékoztató',
    terms: 'Általános szerződési feltételek',
  },
  en: {
    phone: 'Phone',
    owner: 'CEO',
    email: 'Email',
    taxNumber: 'Tax Number',
    address: 'Address',
    regNumber: 'Registration Number',
    copyright: 'Beautyflow Beauty Salon. All rights reserved.',
    privacy: 'Privacy Policy',
    terms: 'Terms and Conditions',
  },
};

const t = labels[lang];
---

<footer class="relative text-white py-16 overflow-hidden">
  <!-- Optimalizált háttérkép -->
  <Picture
    src={footerBg}
    alt=""
    formats={['avif', 'webp']}
    fallbackFormat="jpg"
    widths={[640, 1024, 1280, 1920]}
    sizes="100vw"
    class="absolute inset-0 w-full h-full object-cover object-center"
    loading="lazy"
  />
  <div class="absolute inset-0 bg-black/80"></div>
  <div class="container mx-auto px-4 relative z-10">
    <!-- Logo -->
    <div class="flex justify-center mb-12">
      <Logo class="h-20 w-auto" />
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 mb-12 text-center">
      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.phone}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.phone}</p>
      </div>

      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.owner}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.owner}</p>
      </div>

      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.email}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.email}</p>
      </div>

      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.taxNumber}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.taxNumber}</p>
      </div>

      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.address}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.address}</p>
      </div>

      <div>
        <h4 class="text-sm font-semibold mb-2 text-white uppercase tracking-wide">{t.regNumber}</h4>
        <p class="text-gray-300 text-sm">{contactInfo.regNumber}</p>
      </div>
    </div>

    <!-- Copyright -->
    <div class="text-center text-gray-400 text-sm border-t border-gray-600 pt-8">
      <p>&copy; {new Date().getFullYear()} {t.copyright}</p>
      <p class="mt-2">
        <a href={privacyPath} rel="nofollow" class="text-gray-400 hover:text-[#c53f75] transition-colors underline">{t.privacy}</a>
        {' | '}
        <a href={termsPath} rel="nofollow" class="text-gray-400 hover:text-[#c53f75] transition-colors underline">{t.terms}</a>
      </p>
    </div>
  </div>
</footer>
