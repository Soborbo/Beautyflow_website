---
import { Image } from 'astro:assets';
import hydrabeautyImg from '../assets/images/hydrabeauty.jpg';
import sminktetovalasImg from '../assets/images/sminktetovalas-mb-2.jpg';
import carbonPeelingImg from '../assets/images/carbon-peeling-mb.jpg';
import diodaImg from '../assets/images/dioda-lezeres-szortelenites-mob.jpg';
import tetovalasImg from '../assets/images/sminktetovalas-mb.jpg';
import pigmentfoltImg from '../assets/images/pigmentfolt-arckezeles.jpg';
import { type Locale, defaultLang, getLocalizedPath } from '../i18n';

interface Props {
  lang?: Locale;
}

const { lang = defaultLang } = Astro.props;

const content = {
  hu: {
    title: 'Kezeléseink',
    cta: 'Tovább a kezelésre',
    treatments: [
      { title: 'HydraBeauty arckezelés', description: 'Ragyogó bőr azonnal - tisztítsd, hidratáld, frissítsd fel az arcod. Azonnali hatás!', link: '/hydrabeauty' },
      { title: 'Sminktetoválás', description: 'Nézz ki mindig tökéletesen rögtön az ágyból felkelve is.', link: '/sminktetovalas' },
      { title: 'Carbon Peeling', description: 'Legyen tökéletesen tiszta és egészséges az arcbőröd fájdalommentesen.', link: '/carbon-peeling' },
      { title: 'Dióda lézeres szőrtelenítés', description: 'Legyen mindig tökéletesen sima és vonzó a bőrőd és mondj búcsút a szőrtüszőgyulladásnak', link: '/dioda-lezeres-szortelenites' },
      { title: 'Tetoválás-eltávolítás', description: 'Megbántad egy tetoválásodat? Semmi gond, segítünk, hogy ne zavarjon többé.', link: '/lezeres-tetovalas-eltavolitas' },
      { title: 'Pigmentfolt-eltávolítás', description: 'Legyen tökéletesen tiszta és egészséges az arcbőröd fájdalommentesen.', link: '/pigmentfolt-eltavolitas' },
    ],
  },
  en: {
    title: 'Our Treatments',
    cta: 'Learn More',
    treatments: [
      { title: 'HydraBeauty Facial', description: 'Radiant skin instantly - cleanse, hydrate, refresh your face. Immediate results!', link: '/hydrabeauty' },
      { title: 'Permanent Makeup', description: 'Look perfect right out of bed, every single day.', link: '/permanent-makeup' },
      { title: 'Carbon Peeling', description: 'Achieve perfectly clean and healthy facial skin painlessly.', link: '/carbon-peeling' },
      { title: 'Diode Laser Hair Removal', description: 'Keep your skin perfectly smooth and attractive, say goodbye to ingrown hairs.', link: '/laser-hair-removal' },
      { title: 'Tattoo Removal', description: 'Regret a tattoo? No problem, we help you make it disappear.', link: '/tattoo-removal' },
      { title: 'Pigment Spot Removal', description: 'Achieve perfectly clean and healthy facial skin painlessly.', link: '/pigment-removal' },
    ],
  },
};

const t = content[lang];
const images = [hydrabeautyImg, sminktetovalasImg, carbonPeelingImg, diodaImg, tetovalasImg, pigmentfoltImg];

const treatments = t.treatments.map((treatment, index) => ({
  ...treatment,
  image: images[index],
  link: getLocalizedPath(treatment.link, lang),
}));
---

<section class="py-16">
  <div class="max-w-[1060px] mx-auto px-4">
    <h2 class="font-heading text-3xl lg:text-4xl text-gray-900 mb-12 text-center uppercase font-bold">
      {t.title}
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {treatments.map((treatment) => (
        <div
          class="bg-white rounded-lg overflow-hidden group transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_10px_40px_rgba(0,0,0,0.15)] flex flex-col shadow-[0_4px_15px_rgba(0,0,0,0.08)]"
        >
          <div class="relative overflow-hidden">
            <Image
              src={treatment.image}
              alt={treatment.title}
              class="w-full h-56 object-cover transition-transform duration-300 group-hover:scale-105"
              width={400}
              height={224}
              format="webp"
              quality={80}
              loading="lazy"
            />
          </div>
          <div class="p-6 flex flex-col flex-1">
            <h3 class="font-heading text-[1.4rem] text-gray-900 mb-3 text-center font-bold">
              {treatment.title}
            </h3>
            <p class="text-gray-600 mb-6 text-sm leading-relaxed flex-1">
              {treatment.description}
            </p>
            <a
              href={treatment.link}
              class="block w-full text-center py-3 font-semibold uppercase text-sm tracking-wide border-2 transition-colors mt-auto text-white bg-[#c53f75] border-[#c53f75] hover:bg-transparent hover:text-[#c53f75]"
            >
              {t.cta}
            </a>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
