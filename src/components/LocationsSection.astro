---
import { ContentImage } from './images';
import budaImage from '../assets/images/Beautyflow-buda.jpg';
import pestImage from '../assets/images/Beautyflow-Pest.jpg';
import { type Locale, defaultLang } from '../i18n';

interface Props {
  lang?: Locale;
}

const { lang = defaultLang } = Astro.props;

const content = {
  hu: {
    bookNow: 'Időpontfoglalás',
    openingHours: 'Nyitvatartás',
    hours: [
      { days: 'Hétfő – Péntek', time: '08:00 – 20:00' },
      { days: 'Szombat', time: '10:00 – 20:00' },
      { days: 'Vasárnap', time: '10:00 – 20:00' },
    ],
  },
  en: {
    bookNow: 'Book Appointment',
    openingHours: 'Opening Hours',
    hours: [
      { days: 'Monday – Friday', time: '08:00 – 20:00' },
      { days: 'Saturday', time: '10:00 – 20:00' },
      { days: 'Sunday', time: '10:00 – 20:00' },
    ],
  },
};

const t = content[lang];

const locations = [
  {
    name: 'Beautyflow Buda',
    address: '1116 Budapest, Vegyész u. 1.',
    addressMobile: '1116 Budapest,\nVegyész utca 1.',
    image: budaImage,
    bookingUrl: 'https://www.notino.hu/szalonok/beautyflow?source_caller=ui&shortlink=lbbsjxf8&c=salon_detail_redirect&pid=notino_partner&deep_link_value=https%3A%2F%2Fnotino.hu%2Fszalonok%2Fbeautyflow&af_xp=custom',
    hours: t.hours,
    slideFrom: 'left'
  },
  {
    name: 'Beautyflow Pest',
    address: '1135 Budapest, Reitter Ferenc u. 90.',
    addressMobile: '1135 Budapest,\nReitter Ferenc utca 90.',
    image: pestImage,
    bookingUrl: 'https://www.notino.hu/szalonok/beautyflow-pest?source_caller=ui&shortlink=lbbsjxf8&c=salon_detail_redirect&pid=notino_partner&deep_link_value=https%3A%2F%2Fnotino.hu%2Fszalonok%2Fbeautyflow-pest&af_xp=custom',
    hours: t.hours,
    slideFrom: 'right'
  }
];
---

<section id="locations-section" class="overflow-hidden">
  <div class="flex flex-col lg:flex-row">
    {locations.map((location, index) => (
      <div
        class="location-card relative min-h-[400px] lg:min-h-[450px] flex-1 flex items-center justify-center py-12"
        data-slide-from={location.slideFrom}
      >
        <!-- Background image -->
        <div class="location-bg absolute inset-0 overflow-hidden">
          <ContentImage
            src={location.image}
            alt={location.name}
            class="w-full h-full object-cover"
          />
        </div>

        <!-- White content box - positioned on the inner edge -->
        <div class={`location-content relative z-10 bg-white shadow-xl p-8 w-[320px] ${index === 0 ? 'lg:ml-auto lg:mr-[10px]' : 'lg:mr-auto lg:ml-[10px]'}`}>
          <h2 class="font-heading text-2xl lg:text-3xl text-gray-900 mb-1">
            {location.name}
          </h2>

          <p class="text-gray-600 mb-4 hidden lg:block text-sm">
            {location.address}
          </p>
          <p class="text-gray-600 mb-4 lg:hidden whitespace-pre-line text-sm">
            {location.addressMobile}
          </p>

          <div class="text-center mb-6">
            <a
              href={location.bookingUrl}
              target="_blank"
              rel="noopener"
              class="inline-block bg-[#c53f75] text-white font-semibold uppercase text-sm px-8 py-3 rounded-full hover:bg-[#a33460] transition-colors"
            >
              {t.bookNow}
            </a>
          </div>

          <!-- Opening Hours Table -->
          <table class="w-full text-sm border-t border-gray-300">
            <thead>
              <tr>
                <th colspan="2" class="font-semibold py-3 text-center border-b border-gray-300">
                  {t.openingHours}
                </th>
              </tr>
            </thead>
            <tbody>
              {location.hours.map((hour) => (
                <tr class="border-b border-gray-200">
                  <td class="py-2 text-left font-medium text-gray-700">{hour.days}</td>
                  <td class="py-2 text-right text-gray-600">{hour.time}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    ))}
  </div>
</section>

<style>
  /* Disable animations on mobile - show content immediately */
  @media (max-width: 1023px) {
    .location-bg,
    .location-content {
      transform: none !important;
      transition: none !important;
    }
  }

  /* Desktop only: Both background and content slide together */
  @media (min-width: 1024px) {
    .location-bg,
    .location-content {
      transition: transform 0.8s ease-out;
    }

    /* Slide from left */
    .location-card.animate-ready[data-slide-from="left"] .location-bg,
    .location-card.animate-ready[data-slide-from="left"] .location-content {
      transform: translateX(-100%);
    }

    /* Slide from right */
    .location-card.animate-ready[data-slide-from="right"] .location-bg,
    .location-card.animate-ready[data-slide-from="right"] .location-content {
      transform: translateX(100%);
    }

    /* Animated in state */
    .location-bg.animate-in,
    .location-content.animate-in {
      transform: translateX(0) !important;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .location-bg,
    .location-content {
      transform: none !important;
      transition: none !important;
    }
  }
</style>

